---
title: "Loom CLI Implementation Skeletons"
generated: 2025-01-03T14:30:00Z
status: draft
level: L3
---

# Loom CLI L3 Implementation Skeletons Specification

## Overview

This document specifies the implementation skeleton document structure generated by derive-l3.

**Traceability:** Derived from [tech-specs.md](../l2/tech-specs.md) and [aggregate-design.md](../l2/aggregate-design.md).

---

## Implementation Skeleton Structure

### SKEL-IMP-001: ImplementationSkeleton Entity

**File:** `cmd/derive_l3.go`

```go
type ImplementationSkeleton struct {
    Name         string         `json:"name"`
    Type         string         `json:"type"`
    Functions    []FunctionSpec `json:"functions"`
    Dependencies []string       `json:"dependencies"`
    RelatedSpecs []string       `json:"related_specs"`
}

type FunctionSpec struct {
    Name        string   `json:"name"`
    Signature   string   `json:"signature"`
    Description string   `json:"description"`
    Steps       []string `json:"steps"`
    ErrorCases  []string `json:"error_cases"`
}
```

**ID Pattern:** `SKEL-{DOMAIN}-{NNN}`

Where:
- `{DOMAIN}` - Domain code extracted from service name (first 4 chars uppercase)
- `{NNN}` - Sequence number

**Example:** `SKEL-PROD-001` (ProductService skeleton)

**Related DEC:** DEC-022 (L3 document ID prefixes)

---

## Service Types

| Type | Description | Example |
|------|-------------|---------|
| `service` | Domain service | OrderService |
| `repository` | Data access | OrderRepository |
| `controller` | API handler | OrderController |
| `handler` | Event handler | OrderEventHandler |

---

## Output Format

### OUT-001: implementation-skeletons.md

**File:** `{output-dir}/implementation-skeletons.md`

**Structure:**
```markdown
---
title: Implementation Skeletons
generated: 2024-01-15T10:30:00Z
status: draft
level: L3
---

# Implementation Skeletons

---

## SKEL-ORDR-001: OrderService (service)

**Dependencies:** [CustomerService, InventoryService]

**Related Specs:** [TS-CLI-001, AGG-ORD-001]

### Functions

#### `createOrder`

```typescript
async createOrder(request: CreateOrderRequest): Promise<Order>
```

Creates a new order with validation.

**Implementation Steps:**
1. Validate customer exists
2. Check inventory availability
3. Create order entity
4. Persist order
5. Publish OrderCreated event

**Error Cases:** [InvalidCustomer, OutOfStock, ValidationError]

---
```

---

## Generation Process

### SEQ-SKEL-001: Skeleton Generation

**Input:** `tech-specs.md` (L2)

**Prompt:** Uses `prompts.DeriveL3Skeletons`

**Process:**
1. Read tech specs from L2
2. Generate skeletons via Claude
3. Extract service count and function count
4. Format as markdown with TypeScript signatures

**Output:** `implementation-skeletons.md`

---

## Related Documents

| Level | Document | Description |
|-------|----------|-------------|
| L0 | [decisions.md](../l0/decisions.md) | Design Decisions (L0→L1) |
| L1 | [decisions.md](../l1/decisions.md) | Design Decisions (L1→L2) |
| L2 | [decisions.md](../l2/decisions.md) | Design Decisions (L2→L3) |
| L2 | [tech-specs.md](../l2/tech-specs.md) | Technical Specifications (source) |
| L2 | [aggregate-design.md](../l2/aggregate-design.md) | Aggregate Design (source) |
| L3 | [test-cases.md](test-cases.md) | Test Cases Specification |
| L3 | [openapi-spec.md](openapi-spec.md) | API Specification |
| L3 | This document | Implementation Skeletons |
| L3 | [feature-tickets.md](feature-tickets.md) | Feature Tickets |
