---
title: "Loom CLI Service Boundaries"
generated: 2025-01-03T14:30:00Z
status: draft
level: L3
---

# Loom CLI L3 Service Boundaries Specification

## Overview

This document specifies the service boundary document structure generated by derive-l3.

**Traceability:** Derived from [bounded-context-map.md](../l1/bounded-context-map.md) and [aggregate-design.md](../l2/aggregate-design.md).

---

## Service Boundary Structure

### SVC-BND: ServiceBoundary Entity

**File:** `cmd/derive_l3.go`

```go
type ServiceBoundary struct {
    ID               string              `json:"id"`
    Name             string              `json:"name"`
    Purpose          string              `json:"purpose"`
    Capabilities     []string            `json:"capabilities"`
    Inputs           []ServiceIO         `json:"inputs"`
    Outputs          []ServiceIO         `json:"outputs"`
    OwnedAggregates  []string            `json:"owned_aggregates"`
    Dependencies     []ServiceDependency `json:"dependencies"`
    APIBase          string              `json:"api_base"`
    SeparationReason string              `json:"separation_reason"`
}

type ServiceIO struct {
    Type string `json:"type"`
    Name string `json:"name"`
}

type ServiceDependency struct {
    Service string `json:"service"`
    Type    string `json:"type"`
    Reason  string `json:"reason"`
}
```

**ID Pattern:** `SVC-{DOMAIN}`

Where:
- `{DOMAIN}` - Domain code (e.g., ORDR, CUST, INVT)

**Example:** `SVC-ORDR` (Order Service)

**Related DEC:** DEC-022 (L3 document ID prefixes)

---

## Dependency Types

| Type | Description |
|------|-------------|
| `sync` | Synchronous API call |
| `async` | Asynchronous message/event |
| `data` | Shared data dependency |

---

## Output Format

### OUT-001: service-boundaries.md

**File:** `{output-dir}/service-boundaries.md`

**Structure:**
```markdown
---
title: Service Boundaries
generated: 2024-01-15T10:30:00Z
status: draft
level: L3
---

# Service Boundaries

---

## SVC-ORDR: OrderService

**Purpose:** Manages order lifecycle from creation to completion.

**API Base:** `/api/v1/orders`

**Separation Reason:** Core business domain with distinct data ownership.

### Capabilities
- Create new orders
- Update order status
- Cancel orders
- Track order history

### Inputs
- **Command:** CreateOrderCommand
- **Event:** PaymentConfirmed

### Outputs
- **Event:** OrderCreated
- **Event:** OrderCancelled

### Owned Aggregates
- Order
- OrderItem

### Dependencies
- **CustomerService** (sync): Validate customer exists
- **InventoryService** (sync): Check stock availability
- **NotificationService** (async): Send order confirmations

---
```

---

## Generation Process

### SEQ-SVC-001: Service Boundary Generation

**Input:**
- `bounded-context-map.md` (L1)
- `aggregate-design.md` (L2)

**Prompt:** Uses `prompts.DeriveServiceBoundaries`

**Process:**
1. Read bounded context map and aggregate design
2. Generate service boundaries via Claude
3. Parse service structure
4. Format as markdown

**Output:** `service-boundaries.md`

---

## Related Documents

| Level | Document | Description |
|-------|----------|-------------|
| L0 | [decisions.md](../l0/decisions.md) | Design Decisions (L0→L1) |
| L1 | [bounded-context-map.md](../l1/bounded-context-map.md) | Bounded Context Map (source) |
| L1 | [decisions.md](../l1/decisions.md) | Design Decisions (L1→L2) |
| L2 | [decisions.md](../l2/decisions.md) | Design Decisions (L2→L3) |
| L2 | [aggregate-design.md](../l2/aggregate-design.md) | Aggregate Design (source) |
| L3 | [feature-tickets.md](feature-tickets.md) | Feature Tickets |
| L3 | This document | Service Boundaries |
| L3 | [event-message-design.md](event-message-design.md) | Event & Message Design |
